<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
<script>

    /*
        注意：由于Fetch API是基于Promise设计，旧浏览器不支持Promise，需要使用pollyfill es6-promise

        fetch(url, options)
        .then(function(response) { 
            // handle HTTP response
        }, function(error) {
            // handle network error
        })

        method(String): HTTP请求方法，默认为GET
        body(String): HTTP的请求参数
        headers(Object): HTTP的请求头，默认为{}
        credentials(String): 
            默认为omit,忽略的意思，
            也就是不带cookie;还有两个参数，
                same-origin，意思就是同源请求带cookie；
                include,表示无论跨域还是同源请求都会带cookie
        
        body:  返回体，这里有处理返回体的一些方法

        text(): 将返回体处理成字符串类型
        json()： 返回结果和 JSON.parse(responseText)一样
        blob()： 返回一个Blob，Blob对象是一个不可更改的类文件的二进制数据
        arrayBuffer()
        formData()

    */    

    //post
    // fetch('/post',{
    //     method:'post',
    //     headers: {
    //         "Content-Type": "application/x-www-form-urlencoded"
    //     },
    //     body:new URLSearchParams({
    //         name:'aaa'
    //     }).toString()
    // })
    // .then(e=>e.text())
    // .then(e=>{
    //     console.log( eval('('+ e +')') );
    // });


    //get
    fetch('/get?name=kaiwen')
    .then(d=>{
        // console.log(d.json()); //response{}
        return d.json();
    })
    .then(d=>{
        console.log(d);
    });
    // .then(d=>{
    //     console.log(d);
    // })

    // console.dir(Object);

    // console.log(new URLSearchParams({
    //     name:'aaa',
    //     age:28
    // }).toString())




</script>
</body>
</html>