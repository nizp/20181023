<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
<style>
*{
    margin: 0;
    padding:0;
    font-size:12px;
}
body{
    overflow: hidden;
    /* height: 3000px; */
}
#div1{
    width:10px;
    height:200px;
    border-radius: 5px;
    background: #999;
    /* margin-left:50px;  */
    position: absolute;
    right:0
}
#div2{
    width:10px;
    height:20px;
    border-radius: 5px;
    background:firebrick; 
    position: absolute;
    top:0;
    left:0;
}
#div3{
    width:200px;
    height: 200px;
    position: absolute;
    left:100px;
    top:0;
    border: 1px solid #000;
    /* overflow: hidden; */
   
}
#div4{
    width:100%;
    position: absolute;
    top:0;
    left:0;
}
</style>
</head>
<body>
    <div id="div1">
        <div id="div2"></div>
    </div>
    <div id="div3">
        <div id="div4">
                金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                事件几乎引发了全民关注，从诸多明星公开发声抵制金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                事件几乎引发了全民关注，从诸多明星公开发声抵制金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                事件几乎引发了全民关注，从诸多明星公开发声抵制金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                事件几乎引发了全民关注，从诸多明星公开发声抵制金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                事件几乎引发了全民关注，从诸多明星公开发声抵制金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                事件几乎引发了全民关注，从诸多明星公开发声抵制金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                事件几乎引发了全民关注，从诸多明星公开发声抵制金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                2日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G金融虎讯11月22日凌晨消息，昨日，意大利奢侈品牌杜嘉班纳D&G高管涉嫌辱华事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
                事件几乎引发了全民关注，从诸多明星公开发声抵制到官媒和机构发声，微博热搜前十话题几乎均与该事件有关。而随着涉嫌辱华事件舆论的不断升温，当前已直接影响到其在华的核心利益。
        </div>
    </div>
<script>

    /*
        要不要有滚动条
            div4被内容撑开的高度有没有大于div3的高度


    */
    let scrollH = div4.scrollHeight;
    let clientH3 = div3.clientHeight;
    if(scrollH > clientH3){
        //有滚动条
        //计算滚动条的高度
        
        let h2H = div1.clientHeight * clientH3 / scrollH;
        if(h2H < 20){
            h2H = 20;
        }
        div2.style.height = h2H +'px';
    }else{
        div1.style.display = 'none';
    }


    //拖动

    div2.onmousedown =  function(ev){
      
        let disY = ev.pageY - div2.offsetTop;
        document.onmousemove = function(ev){
            let t = ev.pageY - disY;
            if(t<0){
                t = 0;
            }else if(t > div1.clientHeight - div2.clientHeight){
                t = div1.clientHeight - div2.clientHeight;
            }
            let scale = t/(div1.clientHeight - div2.clientHeight);
            
            div4.style.top = scale * (clientH3 - scrollH) + 'px';
            div2.style.top = t + 'px';
        }   
        document.onmouseup = function(){
            document.onmousemove = document.onmouseup = null;
        }
        return false;
    }

    myScroll(document,function(o){
        let t = div2.offsetTop;
        if(o){
            t -= 5;
            if(t<0) t = 0;
        }else{
            t += 5;
            if(t > div1.clientHeight - div2.clientHeight){
                t = div1.clientHeight - div2.clientHeight;
            }
        }
        console.log(t)
        let scale = t/(div1.clientHeight - div2.clientHeight);
        div4.style.top = scale * (clientH3 - scrollH) + 'px';
        div2.style.top = t + 'px';
    });

    let timer = null;
    let num = 0;
    div1.onmousedown = function(ev){
        // ev.pageY

        (function animate(){
           
            timer = requestAnimationFrame(animate);
            let {top:t,bottom} = div2.getBoundingClientRect();
            if(ev.pageY < t){
                //向上
                t -= 2;
            }else if(bottom < ev.pageY){
                //向下
                t += 2;
            }else{
                //点到身上
                cancelAnimationFrame(timer);
            }
            
            let scale = t/(div1.clientHeight - div2.clientHeight);
            div4.style.top = scale * (clientH3 - scrollH) + 'px';
            div2.style.top = t + 'px';

        })();
        // console.log(top,ev.pageY);
    }

    div1.onmouseup = function(ev){
        cancelAnimationFrame(timer);
    }






    function myScroll(obj,fn){
        if(obj.onmousewheel === undefined){
            //FF
            obj.addEventListener('DOMMouseScroll',wheel1);
        }else{  
            //IE,chrome
            obj.addEventListener('mousewheel',wheel2); 
        }
        
        function wheel1(ev){
            let o = true;//true:上,false下
            o = ev.detail>0?false:true;
            fn && fn(o);
        }
        function wheel2(ev){
            let o = true;//true:上,false下
            o = ev.wheelDelta>0?true:false;
            fn && fn(o);
        }

    }



</script>
</body>
</html>