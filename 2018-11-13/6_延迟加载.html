<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/reset.min.css">
    <link rel="stylesheet" href="css/index.css">
<style>
#list img{
    opacity: 0;
    transition: 1s;
}
</style>
</head>
<body>
<div class="content">
    <div class="header">
        <span>排序</span>
        <a href="javascript:;" kk="time">上架时间
            <i class="up"></i>
            <i class="down"></i>
        </a>
        <a href="javascript:;" kk="hot">热度
            <i class="up"></i>
            <i class="down"></i>
        </a>
        <a href="javascript:;" kk="price">价格
            <i class="up"></i>
            <i class="down"></i>
        </a>
    </div>
    <ul id="list">
        <!-- <li>
            <img src="img/1.jpg" alt="">
            <span>华为畅享7（香槟金）</span>
            <span>2018-01-01</span>
            <span>1</span>
            <span>992</span>
        </li> -->
    </ul>
</div>
<script src="json/product.js"></script>
<script src="./my_tools.js"></script>
<script>
    // console.log(data);  let d = data.concat(data);

    /*
        
        
        ele.setAttribute('index',1)
           标签的属性,在元素的attributes中显示
            
        ele.index = 1;

            直接在元素对象的下就能查看到属性。


    */


    //生成结构
    data.push(...data);
    let temp = '';
    data.forEach(d => {
        temp += `
            <li index="${d.img}">
                <img alt="">
                <span>${d.title}</span>
                <span>${d.time}</span>
                <span>${d.price}</span>
                <span>${d.hot}</span>
            </li>
        `;
    });
    list.innerHTML = temp;


    //获取每个li的绝对位置
    let lis = document.getElementsByTagName('li');
    
    //给每个li设置一个高度的样式（优点），找绝对位置是通过while循环求出来的，每个元素只求一次
    for(let i=0;i<lis.length;i++){
        lis[i].top = obj.offset(lis[i]).t;
        // lis[i].setAttribute('top',obj.offset(lis[i]).t)
        // console.dir(lis[i]);
    }

    // console.log(obj.offset(lis[5]).t);

    let iH = window.innerHeight; //可视区的高度
    window.onscroll = function(){
        for(let i=0;i<lis.length;i++){
            if((window.pageYOffset + iH) >= lis[i].top){
                lis[i].children[0].src = lis[i].getAttribute('index');
                lis[i].children[0].style.opacity = 1;
            }
        }
        console.log(lis[0].top);
    }



</script>
</body>
</html>